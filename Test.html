<!-- Test.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RiceMovies - Home</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body { background: #000; color: #fff; padding: 20px; text-align: center; }
    .movie-card { width: 180px; margin: 10px; display: inline-block; cursor: pointer; }
    .movie-card img { width: 100%; border-radius: 8px; }
    .search-bar { margin-bottom: 20px; max-width: 400px; }
  </style>
</head>
<body>
  <h1>üçø RiceMovies</h1>
  <input id="searchInput" class="form-control search-bar" type="text" placeholder="Search movies..." />

  <div id="movieList" class="d-flex flex-wrap justify-content-center"></div>

  <script>
    const apiKey = '1070730380f5fee0d87cf0382670b255';
    const movieList = document.getElementById('movieList');
    const searchInput = document.getElementById('searchInput');

    async function fetchMovies(url) {
      try {
        const res = await fetch(url);
        const data = await res.json();
        displayMovies(data.results);
      } catch (err) {
        console.error(err);
      }
    }

    function displayMovies(movies) {
      movieList.innerHTML = '';
      movies.forEach(movie => {
        if (!movie.poster_path) return;
        const card = document.createElement('div');
        card.className = 'movie-card';
        card.innerHTML = `
          <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" alt="${movie.title}" />
          <p>${movie.title}</p>
        `;
        card.onclick = () => {
          window.location.href = `watch.html?id=${movie.id}`;
        };
        movieList.appendChild(card);
      });
    }

    searchInput.addEventListener('input', () => {
      const query = searchInput.value.trim();
      if (query) {
        fetchMovies(`https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${query}`);
      } else {
        fetchMovies(`https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}`);
      }
    });

    fetchMovies(`https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}`);
  </script>
</body>
</html>
